---
phase: 01-design-system-foundation
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - client/src/components/ui/Card.tsx
  - client/src/components/ui/Badge.tsx
  - client/src/components/ui/Tooltip.tsx
  - client/src/components/ui/Toast.tsx
autonomous: true

must_haves:
  truths:
    - "User sees Card component with glassmorphism styling (frosted glass background, white border, backdrop blur)"
    - "User sees hover lift effect on Card when mousing over"
    - "User sees Badge component with color variants (primary, accent, voice, social, danger) and optional pulse indicator"
    - "User sees Tooltip appear with slide animation on hover/focus and disappear on leave/blur"
    - "User sees Toast notifications slide in from top-right with auto-dismiss timer and manual close button"
    - "User sees enter/exit animations on Badge, Tooltip, and Toast (fade + slide)"
  artifacts:
    - path: "client/src/components/ui/Card.tsx"
      provides: "Glassmorphism card container component"
      exports: ["Card"]
    - path: "client/src/components/ui/Badge.tsx"
      provides: "Status badge component with color variants"
      exports: ["Badge"]
    - path: "client/src/components/ui/Tooltip.tsx"
      provides: "Hover/focus tooltip component with positioning"
      exports: ["Tooltip"]
    - path: "client/src/components/ui/Toast.tsx"
      provides: "Toast notification system with auto-dismiss and stack management"
      exports: ["Toast", "ToastProvider", "useToast"]
  key_links:
    - from: "client/src/components/ui/Card.tsx"
      to: "client/src/index.css"
      via: "Uses .glass utility class for glassmorphism"
      pattern: "glass"
    - from: "client/src/components/ui/Toast.tsx"
      to: "client/tailwind.config.js"
      via: "Uses animate-slideUp, animate-fadeOut animation utilities"
      pattern: "animate-slideUp|animate-fadeOut"
---

<objective>
Build the visual/feedback component set — Card, Badge, Tooltip, and Toast — that provide container styling, status indication, contextual help, and user notifications.

Purpose: Card is the primary container for all glassmorphism panels (auth, lobby, settings, HUD). Badge indicates status (online, speaking, AFK). Tooltip provides contextual help for icons/buttons. Toast delivers system notifications (user joined, connection status). These four components complete the design system primitive set.

Output: Four production-ready React components with TypeScript props, animations, and accessibility support.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-design-system-foundation/01-RESEARCH.md
@.planning/phases/01-design-system-foundation/01-01-SUMMARY.md
@client/tailwind.config.js
@client/src/index.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build Card and Badge components</name>
  <files>
    client/src/components/ui/Card.tsx
    client/src/components/ui/Badge.tsx
  </files>
  <action>
**Card component** (`client/src/components/ui/Card.tsx`):

Props interface (CardProps):
- Extends `React.HTMLAttributes<HTMLDivElement>`
- `variant`: `'glass' | 'solid' | 'outline'` (default: `'glass'`)
- `hover`: `boolean` (default: `false`) — enables hover lift effect
- `padding`: `'none' | 'sm' | 'md' | 'lg'` (default: `'md'`)
- `children`: `React.ReactNode`

Variant styles (object lookup):
- `glass`: Use the `.glass` CSS class (from index.css) PLUS `rounded-xl`. Apply via string concatenation: `glass rounded-xl`
- `solid`: `bg-surface-800 rounded-xl border border-surface-700`
- `outline`: `bg-transparent rounded-xl border border-surface-600`

Padding styles:
- `none`: no padding
- `sm`: `p-3`
- `md`: `p-5`
- `lg`: `p-8`

Hover effect (when `hover=true`):
- Add `transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:shadow-primary-500/10` classes
- For glass variant also add `glass-hover` class

Base styles: `overflow-hidden`

Spread remaining props onto the div. Allow `className` override via concatenation.

Export: `export function Card({ variant, hover, padding, className, children, ...props }: CardProps)`

---

**Badge component** (`client/src/components/ui/Badge.tsx`):

Props interface (BadgeProps):
- `variant`: `'primary' | 'accent' | 'voice' | 'social' | 'danger' | 'neutral'` (default: `'neutral'`)
- `size`: `'sm' | 'md'` (default: `'md'`)
- `pulse`: `boolean` (default: `false`) — adds pulsing dot indicator
- `children`: `React.ReactNode`
- `className`: `string | undefined`

Variant styles (object lookup for bg + text color):
- `primary`: `bg-primary-500/20 text-primary-300 border border-primary-500/30`
- `accent`: `bg-accent-500/20 text-accent-300 border border-accent-500/30`
- `voice`: `bg-voice-500/20 text-voice-300 border border-voice-500/30`
- `social`: `bg-social-500/20 text-social-300 border border-social-500/30`
- `danger`: `bg-red-500/20 text-red-300 border border-red-500/30`
- `neutral`: `bg-surface-700 text-gray-300 border border-surface-600`

Size styles:
- `sm`: `px-1.5 py-0.5 text-xs rounded`
- `md`: `px-2.5 py-0.5 text-xs rounded-md`

Pulse indicator: When `pulse=true`, render a small dot (`<span>`) before children with the matching variant color and `animate-pulse` class. Dot: `w-1.5 h-1.5 rounded-full` with matching solid bg color (e.g., `bg-primary-400` for primary variant).

Base styles: `inline-flex items-center gap-1.5 font-medium`

Enter animation: `motion-safe:animate-scaleIn` on mount.

Export: `export function Badge({ variant, size, pulse, className, children }: BadgeProps)`
  </action>
  <verify>
    Run `cd client && npx tsc --noEmit` — no type errors.
    Grep for `glass` in Card.tsx — confirms glassmorphism integration.
    Grep for `hover` in Card.tsx — confirms hover lift effect.
    Grep for `pulse` in Badge.tsx — confirms pulse indicator.
    Grep for `variant` in Badge.tsx — confirms variant system.
  </verify>
  <done>
    Card.tsx exports Card with 3 variants (glass/solid/outline), hover lift, 4 padding sizes, and glassmorphism via .glass utility. Badge.tsx exports Badge with 6 color variants, 2 sizes, optional pulse indicator dot, and scaleIn enter animation. Both use design tokens.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build Tooltip and Toast notification system</name>
  <files>
    client/src/components/ui/Tooltip.tsx
    client/src/components/ui/Toast.tsx
  </files>
  <action>
**Tooltip component** (`client/src/components/ui/Tooltip.tsx`):

Props interface (TooltipProps):
- `content`: `React.ReactNode` — tooltip text/content
- `position`: `'top' | 'bottom' | 'left' | 'right'` (default: `'top'`)
- `delay`: `number` (default: `300`) — milliseconds before show
- `children`: `React.ReactNode` — the trigger element

Implementation:
- Use `useState` for `visible` boolean and `useRef` for timeout cleanup.
- Wrapper `<div>` with `relative inline-block` positioning.
- On `onMouseEnter` / `onFocus`: Start timeout, then set visible=true.
- On `onMouseLeave` / `onBlur`: Clear timeout, set visible=false.
- Tooltip content: Absolutely positioned `<div>` rendered when visible.

Position styles (object lookup):
- `top`: `bottom-full left-1/2 -translate-x-1/2 mb-2`
- `bottom`: `top-full left-1/2 -translate-x-1/2 mt-2`
- `left`: `right-full top-1/2 -translate-y-1/2 mr-2`
- `right`: `left-full top-1/2 -translate-y-1/2 ml-2`

Tooltip styling: `glass px-2.5 py-1.5 text-xs text-white rounded-lg whitespace-nowrap pointer-events-none z-50`

Enter animation: `motion-safe:animate-fadeIn`

Accessibility: `role="tooltip"`, `aria-hidden` based on visibility, trigger element gets `aria-describedby` pointing to tooltip id.

Export: `export function Tooltip({ content, position, delay, children }: TooltipProps)`

---

**Toast notification system** (`client/src/components/ui/Toast.tsx`):

This file exports THREE things: `ToastProvider`, `Toast`, and `useToast` hook.

**Toast types:**
```typescript
type ToastVariant = 'info' | 'success' | 'warning' | 'error';
interface ToastItem {
  id: string;
  message: string;
  variant: ToastVariant;
  duration: number; // ms, default 4000
}
```

**useToast hook (using Zustand — create a small inline store):**
Create a Zustand store within Toast.tsx (NOT a separate file — keep it self-contained):
```typescript
const useToastStore = create<{
  toasts: ToastItem[];
  addToast: (toast: Omit<ToastItem, 'id'>) => void;
  removeToast: (id: string) => void;
}>((set) => ({
  toasts: [],
  addToast: (toast) => set((s) => ({
    toasts: [...s.toasts, { ...toast, id: crypto.randomUUID() }]
  })),
  removeToast: (id) => set((s) => ({
    toasts: s.toasts.filter((t) => t.id !== id)
  })),
}));
```

Export `useToast` as a convenience wrapper:
```typescript
export function useToast() {
  const addToast = useToastStore((s) => s.addToast);
  return {
    toast: (message: string, variant: ToastVariant = 'info', duration = 4000) =>
      addToast({ message, variant, duration }),
    success: (message: string) => addToast({ message, variant: 'success', duration: 4000 }),
    error: (message: string) => addToast({ message, variant: 'error', duration: 5000 }),
    warning: (message: string) => addToast({ message, variant: 'warning', duration: 4000 }),
    info: (message: string) => addToast({ message, variant: 'info', duration: 4000 }),
  };
}
```

**Toast (single toast item) component:**
Variant styles (object lookup for left border color + icon):
- `info`: `border-l-4 border-l-accent-500`, info icon (i circle)
- `success`: `border-l-4 border-l-voice-500`, check icon
- `warning`: `border-l-4 border-l-social-500`, warning triangle icon
- `error`: `border-l-4 border-l-red-500`, x circle icon

Icons: Simple inline SVGs (16x16), stroke-based, matching the border color.

Styling: `glass rounded-lg px-4 py-3 flex items-start gap-3 min-w-[300px] max-w-[420px] shadow-lg`

Auto-dismiss: `useEffect` with `setTimeout(duration)` that calls `removeToast(id)`. Clear on unmount.

Exit animation: Track `exiting` state. Before removing, set exiting=true, wait 150ms, then actually remove. Use `motion-safe:animate-fadeOut` when exiting.

Close button: Small `x` button on the right side. `text-gray-400 hover:text-white`.

**ToastProvider component:**
Renders toast container fixed at `top-4 right-4 z-[100]` with `flex flex-col gap-2`.
Maps over `useToastStore.toasts` and renders each `<Toast>`.
Enter animation on each toast: `motion-safe:animate-slideUp`.

Export: `export function ToastProvider()` — must be placed once in App.tsx (but do NOT modify App.tsx in this plan — that's for later phases when they integrate).
  </action>
  <verify>
    Run `cd client && npx tsc --noEmit` — no type errors.
    Grep for `role="tooltip"` in Tooltip.tsx — confirms accessibility.
    Grep for `useToast` in Toast.tsx — confirms hook export.
    Grep for `ToastProvider` in Toast.tsx — confirms provider export.
    Grep for `animate-` in Toast.tsx — confirms enter/exit animations.
    Grep for `animate-fadeIn` in Tooltip.tsx — confirms enter animation.
    Grep for `zustand` or `create` in Toast.tsx — confirms Zustand store.
  </verify>
  <done>
    Tooltip.tsx exports Tooltip with 4 positions, delay, glassmorphism styling, fadeIn animation, and aria attributes. Toast.tsx exports ToastProvider (fixed container), Toast (single item with 4 variants, auto-dismiss, exit animation), and useToast hook (convenience methods: toast, success, error, warning, info) backed by an inline Zustand store. All animations respect prefers-reduced-motion via motion-safe prefix.
  </done>
</task>

</tasks>

<verification>
1. `cd client && npx tsc --noEmit` — exits 0
2. `ls client/src/components/ui/{Card,Badge,Tooltip,Toast}.tsx` — all 4 files exist
3. `grep 'export' client/src/components/ui/Card.tsx` — named export
4. `grep 'export' client/src/components/ui/Badge.tsx` — named export
5. `grep -c 'export' client/src/components/ui/Toast.tsx` — at least 3 exports (Toast, ToastProvider, useToast)
6. `grep 'export' client/src/components/ui/Tooltip.tsx` — named export
7. `grep 'glass' client/src/components/ui/Card.tsx` — glassmorphism integration
8. `grep 'motion-safe' client/src/components/ui/Toast.tsx` — reduced motion support
</verification>

<success_criteria>
- Card has 3 variants (glass/solid/outline) with glassmorphism as default
- Card has hover lift effect option with shadow transition
- Card has 4 padding options and spreads extra props
- Badge has 6 color variants matching design token palette
- Badge has optional pulse dot indicator with matching color
- Badge has scaleIn enter animation with motion-safe guard
- Tooltip has 4 position options (top/bottom/left/right)
- Tooltip has configurable show delay with timeout cleanup
- Tooltip uses glassmorphism styling and fadeIn animation
- Tooltip has proper accessibility (role, aria-describedby, aria-hidden)
- Toast system has 4 variants (info/success/warning/error) with distinct left border colors and icons
- Toast has auto-dismiss timer with configurable duration
- Toast has enter (slideUp) and exit (fadeOut) animations
- Toast has close button for manual dismissal
- ToastProvider renders fixed container in top-right corner
- useToast hook provides convenience methods (toast, success, error, warning, info)
- All animations respect prefers-reduced-motion via motion-safe prefix
- TypeScript compilation succeeds with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-design-system-foundation/01-03-SUMMARY.md`
</output>
