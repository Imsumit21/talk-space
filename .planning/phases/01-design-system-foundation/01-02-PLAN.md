---
phase: 01-design-system-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - client/src/components/ui/Button.tsx
  - client/src/components/ui/Input.tsx
autonomous: true

must_haves:
  truths:
    - "User can interact with Button component in primary, secondary, ghost, and danger variants with distinct visual styles"
    - "User sees loading spinner and disabled state when Button is in loading state"
    - "User sees ripple effect emanating from click point on Button press"
    - "User can type in Input component and sees floating label animate upward on focus/fill"
    - "User sees focus glow ring on Input when focused"
    - "User sees validation state feedback (success green border, error red border with message) on Input"
  artifacts:
    - path: "client/src/components/ui/Button.tsx"
      provides: "Reusable Button component with 4 variants, loading, ripple, sizes"
      exports: ["Button"]
    - path: "client/src/components/ui/Input.tsx"
      provides: "Reusable Input component with floating label, validation, focus glow"
      exports: ["Input"]
  key_links:
    - from: "client/src/components/ui/Button.tsx"
      to: "client/tailwind.config.js"
      via: "Uses primary, accent, voice, social color tokens and animation utilities"
      pattern: "bg-primary|bg-accent|animate-"
    - from: "client/src/components/ui/Input.tsx"
      to: "client/src/index.css"
      via: "Uses glow-ring utilities for focus states"
      pattern: "glow-ring|peer"
---

<objective>
Build the two interactive primitive components — Button and Input — that form the foundation of all user interaction across the application.

Purpose: Every form, dialog, and interactive element in Phases 2-6 will use these components. Button handles actions (submit, navigate, toggle), Input handles text entry (auth forms, chat, settings). Getting these right with proper variants, states, and accessibility eliminates per-use styling decisions.

Output: Two production-ready React components with TypeScript props, all visual variants, loading/validation states, and motion-safe animations.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-design-system-foundation/01-RESEARCH.md
@.planning/phases/01-design-system-foundation/01-01-SUMMARY.md
@client/tailwind.config.js
@client/src/index.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build Button component with variants, loading state, and ripple effect</name>
  <files>
    client/src/components/ui/Button.tsx
  </files>
  <action>
Create `client/src/components/ui/Button.tsx` — a fully typed React button component.

**Props interface (ButtonProps):**
- Extends `React.ButtonHTMLAttributes<HTMLButtonElement>`
- `variant`: `'primary' | 'secondary' | 'ghost' | 'danger'` (default: `'primary'`)
- `size`: `'sm' | 'md' | 'lg'` (default: `'md'`)
- `loading`: `boolean` (default: `false`)
- `children`: `React.ReactNode`

**Variant styles (use object lookup pattern, NOT if/else chains):**
- `primary`: `bg-primary-500 hover:bg-primary-600 text-white shadow-md hover:shadow-glow-sm shadow-primary-500/25`
- `secondary`: `bg-surface-700 hover:bg-surface-600 text-white border border-glass-border`
- `ghost`: `bg-transparent hover:bg-white/10 text-gray-300 hover:text-white`
- `danger`: `bg-red-600 hover:bg-red-700 text-white shadow-md hover:shadow-glow-sm shadow-red-500/25`

**Size styles:**
- `sm`: `px-3 py-1.5 text-sm rounded-lg`
- `md`: `px-4 py-2 text-sm rounded-lg`
- `lg`: `px-6 py-3 text-base rounded-xl`

**Base styles (all variants):** `inline-flex items-center justify-center font-medium transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-400 focus-visible:ring-offset-2 focus-visible:ring-offset-surface-900 disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden`

**Loading state:**
- When `loading=true`: Render a spinning SVG circle (animate-spin, w-4 h-4) before children text. Set `disabled` automatically. Add `opacity-80`.
- SVG: standard spinner circle with `stroke="currentColor"`, strokeDasharray="60 200", strokeLinecap="round"

**Ripple effect:**
- Use `useState` to track ripple state: `{ x: number; y: number; show: boolean }`
- On `onClick`: Calculate click position relative to button using `getBoundingClientRect()`. Set ripple position, show=true. Use `setTimeout(300)` to hide.
- Render ripple as absolute-positioned `<span>` with `animate-ripple` class, positioned at click coordinates, `bg-white/30 rounded-full` with `pointer-events-none`.
- Wrap in `motion-safe:` — only show ripple when user has no reduced-motion preference (use `window.matchMedia('(prefers-reduced-motion: reduce)')` check OR simply use CSS `motion-safe:animate-ripple`).

**Accessibility:**
- Forward ref using `React.forwardRef`
- `aria-busy={loading}` when loading
- `aria-disabled` mirrors disabled state
- Ensure focus-visible ring is always visible for keyboard navigation

Export as named export: `export const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(...)`.
  </action>
  <verify>
    Run `cd client && npx tsc --noEmit` — no type errors.
    Grep for `variant` in Button.tsx — confirms variant system exists.
    Grep for `animate-ripple` in Button.tsx — confirms ripple animation.
    Grep for `loading` in Button.tsx — confirms loading state.
    Grep for `forwardRef` in Button.tsx — confirms ref forwarding.
  </verify>
  <done>
    Button.tsx exports a forwardRef Button component with 4 variants (primary/secondary/ghost/danger), 3 sizes (sm/md/lg), loading spinner state, click-position ripple effect with motion-safe guard, focus-visible ring, and full TypeScript typing. All styles use design token classes from Plan 01.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build Input component with floating label, focus glow, and validation</name>
  <files>
    client/src/components/ui/Input.tsx
  </files>
  <action>
Create `client/src/components/ui/Input.tsx` — a fully typed React input component with floating label.

**Props interface (InputProps):**
- Extends `Omit<React.InputHTMLAttributes<HTMLInputElement>, 'size'>`
- `label`: `string` — the floating label text
- `error`: `string | undefined` — error message (shows red state)
- `success`: `boolean` (default: `false`) — shows green state
- `icon`: `React.ReactNode | undefined` — optional left icon
- `size`: `'sm' | 'md' | 'lg'` (default: `'md'`)

**Implementation — Floating label using Tailwind peer modifier:**
- Structure: `<div>` wrapper > `<input className="peer ...">` > `<label>` > optional error `<p>`
- Input has `id` prop (auto-generate with `useId()` if not provided)
- Label uses `htmlFor` matching input id
- Input has `placeholder=" "` (single space — triggers `:not(:placeholder-shown)` for peer)

**Floating label CSS behavior (all via Tailwind classes on `<label>`):**
- Default position: `top-1/2 -translate-y-1/2 left-3` (or left-9 if icon) `text-gray-400 text-sm`
- On focus OR filled: `peer-focus:top-1.5 peer-focus:-translate-y-0 peer-focus:text-xs peer-focus:text-primary-400` AND `peer-[:not(:placeholder-shown)]:top-1.5 peer-[:not(:placeholder-shown)]:-translate-y-0 peer-[:not(:placeholder-shown)]:text-xs`
- Transition: `transition-all duration-200`

**Input base styles:** `w-full bg-surface-800 text-white rounded-lg border border-surface-600 outline-none transition-all duration-200 pt-5 pb-1.5 px-3` (extra top padding for floating label space)

**Size styles:**
- `sm`: `text-sm pt-4 pb-1 px-3`
- `md`: `text-sm pt-5 pb-1.5 px-3`
- `lg`: `text-base pt-6 pb-2 px-4`

**Focus state:** `focus:border-primary-500` + apply `glow-ring-primary` class (from index.css) on focus via `focus:glow-ring-primary` — BUT since glow-ring is a component class not a utility, instead add `focus:ring-2 focus:ring-primary-500/30 focus:border-primary-500` directly on the input.

**Validation states:**
- Error: `border-red-500 focus:border-red-500 focus:ring-red-500/30` on input. Show `<p className="text-red-400 text-xs mt-1">{error}</p>` below.
- Success: `border-voice-500 focus:border-voice-500 focus:ring-voice-500/30` on input.
- Default: `border-surface-600` as base.

**Icon support:**
- If `icon` provided: render icon in `absolute left-3 top-1/2 -translate-y-1/2 text-gray-400` position. Add `pl-9` to input. Shift label `left-9`.

**Accessibility:**
- Forward ref using `React.forwardRef`
- `aria-invalid={!!error}`
- `aria-describedby` points to error message element id when error exists
- Label always associated via `htmlFor`

Export as named export: `export const Input = React.forwardRef<HTMLInputElement, InputProps>(...)`.
  </action>
  <verify>
    Run `cd client && npx tsc --noEmit` — no type errors.
    Grep for `peer` in Input.tsx — confirms floating label peer modifier usage.
    Grep for `error` in Input.tsx — confirms validation state handling.
    Grep for `forwardRef` in Input.tsx — confirms ref forwarding.
    Grep for `label` in Input.tsx — confirms floating label implementation.
  </verify>
  <done>
    Input.tsx exports a forwardRef Input component with floating label animation (via Tailwind peer modifier, zero JS for animation), 3 sizes, error/success validation states with visual feedback and error message display, optional left icon, focus glow ring, and full TypeScript typing. All styles use design token classes from Plan 01.
  </done>
</task>

</tasks>

<verification>
1. `cd client && npx tsc --noEmit` — exits 0 (no type errors)
2. `ls client/src/components/ui/Button.tsx client/src/components/ui/Input.tsx` — both files exist
3. `grep -c 'export' client/src/components/ui/Button.tsx` — at least 1 named export
4. `grep -c 'export' client/src/components/ui/Input.tsx` — at least 1 named export
5. `grep 'variant' client/src/components/ui/Button.tsx` — variant system exists
6. `grep 'peer' client/src/components/ui/Input.tsx` — floating label mechanism exists
7. `grep 'forwardRef' client/src/components/ui/Button.tsx client/src/components/ui/Input.tsx` — both use forwardRef
</verification>

<success_criteria>
- Button has 4 variants (primary, secondary, ghost, danger) with distinct visual styles using design tokens
- Button has 3 sizes (sm, md, lg) with appropriate padding and text size
- Button has loading state with spinner SVG and auto-disabled behavior
- Button has ripple effect on click with motion-safe guard
- Button has focus-visible ring for keyboard accessibility
- Button is forwardRef with full TypeScript prop typing
- Input has floating label that animates via Tailwind peer modifier (zero JS animation)
- Input has 3 sizes with appropriate spacing for floating label
- Input has error state (red border + error message) and success state (green border)
- Input has optional left icon with proper label offset
- Input has focus glow ring matching design system colors
- Input is forwardRef with full TypeScript prop typing
- Both components use design tokens from tailwind.config.js (primary, accent, voice, surface colors)
- TypeScript compilation succeeds with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-design-system-foundation/01-02-SUMMARY.md`
</output>
