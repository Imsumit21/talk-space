---
phase: 02-authentication-lobby-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - client/package.json
  - client/src/schemas/auth.ts
  - client/src/components/GradientBackground.tsx
  - client/src/index.css
  - client/tailwind.config.js
autonomous: true

must_haves:
  truths:
    - "User sees animated gradient mesh background with shifting indigo/purple/blue colors"
    - "Gradient animation disables on mobile and prefers-reduced-motion"
    - "Zod validation schemas exist for login and register forms with type inference"
  artifacts:
    - path: "client/src/schemas/auth.ts"
      provides: "Zod validation schemas for login and register"
      exports: ["loginSchema", "registerSchema", "LoginFormData", "RegisterFormData"]
    - path: "client/src/components/GradientBackground.tsx"
      provides: "Animated gradient mesh background component"
      exports: ["GradientBackground"]
    - path: "client/src/index.css"
      provides: "CSS keyframes for meshGradient, shake, form animations"
      contains: "meshGradient"
  key_links:
    - from: "client/src/schemas/auth.ts"
      to: "zod"
      via: "z.object schema definitions"
      pattern: "z\\.object"
    - from: "client/tailwind.config.js"
      to: "client/src/components/GradientBackground.tsx"
      via: "meshGradient keyframe used by component"
      pattern: "meshGradient"
---

<objective>
Install Phase 2 dependencies (react-hook-form, zod, @hookform/resolvers, framer-motion, zxcvbn), create Zod validation schemas for auth forms, build the animated gradient mesh background component, and add CSS keyframes for mesh gradient animation, form shake, and page transitions.

Purpose: Establish the foundation layer that all Phase 2 UI components will consume -- validation schemas, animation infrastructure, and the immersive gradient background that sets the cinematic first impression.

Output: Installed dependencies, Zod schemas with TypeScript inference, GradientBackground component, and CSS/Tailwind keyframes for meshGradient, shake, and transition animations.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-design-system-foundation/01-01-SUMMARY.md
@client/tailwind.config.js
@client/src/index.css
@client/package.json
@shared/types/auth.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies and create Zod validation schemas</name>
  <files>client/package.json, client/src/schemas/auth.ts</files>
  <action>
1. Install Phase 2 frontend dependencies:
   ```bash
   cd client && npm install react-hook-form zod @hookform/resolvers framer-motion zxcvbn && npm install --save-dev @types/zxcvbn
   ```

2. Create `client/src/schemas/auth.ts` with two Zod schemas:

   **loginSchema:**
   - email: z.string().email('Invalid email address')
   - password: z.string().min(8, 'Password must be at least 8 characters')

   **registerSchema:**
   - email: z.string().email('Invalid email address')
   - username: z.string().min(3, 'Username must be at least 3 characters').max(20, 'Username must be at most 20 characters').regex(/^[a-zA-Z0-9_-]+$/, 'Only letters, numbers, underscore, and hyphen')
   - password: z.string().min(8, 'Password must be at least 8 characters').max(128, 'Password must be at most 128 characters')
   - confirmPassword: z.string()
   - Add .refine() to registerSchema: data.password === data.confirmPassword with message "Passwords don't match" on path ['confirmPassword']

   Export types: `LoginFormData = z.infer<typeof loginSchema>` and `RegisterFormData = z.infer<typeof registerSchema>`

NOTE: Do NOT use mode: 'onChange' for validation. These schemas are used with react-hook-form mode: 'onBlur' (configured in Plan 02). Password strength meter is informational only -- do NOT add zxcvbn score checks to schema validation.
  </action>
  <verify>
    - `cd client && npm ls react-hook-form zod @hookform/resolvers framer-motion zxcvbn` shows all 5 installed
    - `npx tsc --noEmit` passes with no errors
    - `client/src/schemas/auth.ts` exports loginSchema, registerSchema, LoginFormData, RegisterFormData
  </verify>
  <done>
    - All 5 dependencies installed in client/package.json
    - Zod schemas validate email, username (3-20 chars, alphanumeric+underscore+hyphen), password (8-128 chars), confirmPassword match
    - TypeScript infers correct form data types from schemas
    - No password strength blocking in schemas (informational only per research)
  </done>
</task>

<task type="auto">
  <name>Task 2: Build gradient mesh background and add CSS animation keyframes</name>
  <files>client/src/components/GradientBackground.tsx, client/src/index.css, client/tailwind.config.js</files>
  <action>
1. Add meshGradient keyframe to `client/tailwind.config.js`:
   ```js
   meshGradient: {
     '0%, 100%': { backgroundPosition: '0% 50%' },
     '50%': { backgroundPosition: '100% 50%' },
   },
   ```
   And corresponding animation:
   ```js
   meshGradient: 'meshGradient 15s ease-in-out infinite',
   ```

2. Add shake keyframe to `client/tailwind.config.js`:
   ```js
   shake: {
     '0%, 100%': { transform: 'translateX(0)' },
     '10%, 30%, 50%, 70%, 90%': { transform: 'translateX(-8px)' },
     '20%, 40%, 60%, 80%': { transform: 'translateX(8px)' },
   },
   ```
   And animation:
   ```js
   shake: 'shake 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97)',
   ```

3. Create `client/src/components/GradientBackground.tsx`:
   - Fixed position div covering full viewport (`fixed inset-0 -z-10`)
   - Inner div with CSS background using 3 radial gradients:
     - `radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.4) 0%, transparent 50%)` (indigo)
     - `radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.4) 0%, transparent 50%)` (purple)
     - `radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.4) 0%, transparent 50%)` (blue)
     - Base color: `#1e1b4b` (primary-950)
   - backgroundSize: '200% 200%'
   - Use the gradient-mesh-animate CSS class for animation
   - CRITICAL: Do NOT animate backdrop-filter. Only animate background-position.

4. In `client/src/index.css`, add inside the existing `@layer components` block:
   ```css
   .gradient-mesh-animate {
     animation: meshGradient 15s ease-in-out infinite;
   }
   ```
   And add a mobile media query AFTER the @layer components block (but before the prefers-reduced-motion query):
   ```css
   @media (max-width: 768px) {
     .gradient-mesh-animate {
       animation: none !important;
     }
   }
   ```

NOTE: The GradientBackground component uses inline styles for the gradient itself (radial-gradient values with specific RGBA colors are not Tailwind-compatible) but uses Tailwind classes for layout. The existing prefers-reduced-motion query in index.css already handles disabling all animations globally.
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `client/src/components/GradientBackground.tsx` exports GradientBackground
    - `client/tailwind.config.js` contains meshGradient and shake keyframes
    - `client/src/index.css` contains gradient-mesh-animate class with mobile media query override
  </verify>
  <done>
    - GradientBackground renders animated indigo/purple/blue gradient mesh
    - Animation uses CSS keyframes on background-position (NOT backdrop-filter)
    - Animation respects prefers-reduced-motion (via existing global media query in index.css)
    - Animation disabled on mobile (max-width 768px) via CSS media query
    - Shake animation keyframe available in Tailwind config for form error feedback
    - meshGradient Tailwind keyframe and animation utility registered
  </done>
</task>

</tasks>

<verification>
1. Run `cd client && npm ls react-hook-form zod @hookform/resolvers framer-motion zxcvbn` -- all 5 installed
2. Run `npx tsc --noEmit` -- no TypeScript errors
3. Verify client/src/schemas/auth.ts has loginSchema and registerSchema with proper validation rules
4. Verify client/src/components/GradientBackground.tsx renders gradient with 3 radial gradients
5. Verify client/tailwind.config.js has meshGradient and shake keyframes
6. Verify client/src/index.css has gradient-mesh-animate class with mobile override
</verification>

<success_criteria>
- 5 new npm dependencies installed (react-hook-form, zod, @hookform/resolvers, framer-motion, zxcvbn) + @types/zxcvbn devDep
- Zod schemas export correct types matching auth form fields
- GradientBackground component renders animated gradient mesh with indigo/purple/blue
- CSS animations respect reduced-motion and disable on mobile
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-authentication-lobby-redesign/02-01-SUMMARY.md`
</output>
