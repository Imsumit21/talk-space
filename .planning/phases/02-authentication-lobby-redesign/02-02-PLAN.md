---
phase: 02-authentication-lobby-redesign
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - client/src/components/AuthForms.tsx
  - client/src/components/PasswordStrengthMeter.tsx
autonomous: true

must_haves:
  truths:
    - "User sees glassmorphism card with Talk Space branding (SVG icon with glow) on auth page"
    - "User sees smooth sliding tab switcher between login and register"
    - "User sees floating label inputs that validate on blur with icons"
    - "User sees password strength meter on register form that updates in real-time"
    - "User sees gradient submit button (indigo to blue) with hover scale and glow"
    - "User experiences form shake animation and red glow on invalid fields when submitting errors"
    - "User sees descriptive toast notifications on auth errors"
    - "User sees social auth placeholder buttons (Google/GitHub) in disabled coming-soon state"
  artifacts:
    - path: "client/src/components/AuthForms.tsx"
      provides: "Complete glassmorphism auth page with login/register forms"
      min_lines: 150
    - path: "client/src/components/PasswordStrengthMeter.tsx"
      provides: "Visual password strength indicator using zxcvbn"
      exports: ["PasswordStrengthMeter"]
  key_links:
    - from: "client/src/components/AuthForms.tsx"
      to: "client/src/schemas/auth.ts"
      via: "zodResolver with loginSchema/registerSchema"
      pattern: "zodResolver"
    - from: "client/src/components/AuthForms.tsx"
      to: "client/src/services/auth.ts"
      via: "login() and register() API calls"
      pattern: "login|register"
    - from: "client/src/components/AuthForms.tsx"
      to: "client/src/components/ui/Toast.tsx"
      via: "useToast() for error notifications"
      pattern: "useToast"
    - from: "client/src/components/AuthForms.tsx"
      to: "client/src/components/GradientBackground.tsx"
      via: "GradientBackground rendered as page background"
      pattern: "GradientBackground"
    - from: "client/src/components/PasswordStrengthMeter.tsx"
      to: "zxcvbn"
      via: "password scoring"
      pattern: "zxcvbn"
---

<objective>
Rebuild the AuthForms component as a cinematic glassmorphism auth experience with Talk Space branding, animated tab switcher, react-hook-form validation with Zod schemas, password strength meter, gradient submit button, error feedback (shake + glow + toast), and social auth placeholder buttons.

Purpose: Transform the plain gray auth page into a visually stunning first impression that communicates quality and polish. This is the first thing every user sees.

Output: Redesigned AuthForms.tsx with glassmorphism card, PasswordStrengthMeter.tsx component, fully wired to existing auth service and Phase 1 UI components.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-authentication-lobby-redesign/02-01-SUMMARY.md
@client/src/components/AuthForms.tsx
@client/src/services/auth.ts
@client/src/schemas/auth.ts
@client/src/components/GradientBackground.tsx
@client/src/components/ui/Button.tsx
@client/src/components/ui/Input.tsx
@client/src/components/ui/Card.tsx
@client/src/components/ui/Toast.tsx
@client/src/store/useGameStore.ts
@shared/types/auth.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PasswordStrengthMeter component</name>
  <files>client/src/components/PasswordStrengthMeter.tsx</files>
  <action>
Create `client/src/components/PasswordStrengthMeter.tsx`:

1. Accept props: `{ password: string }` -- only render when password is non-empty
2. Import zxcvbn and score the password (0-4 scale)
3. Display a visual strength bar:
   - Container: h-1 w-full bg-surface-800 rounded-full overflow-hidden
   - Fill bar: width proportional to score ((score + 1) * 20%), transition-all duration-300
   - Colors array by score: ['#ef4444' (red), '#f59e0b' (amber), '#fbbf24' (yellow), '#10b981' (green), '#059669' (dark green)]
4. Display strength label below the bar:
   - Labels: ['Very Weak', 'Weak', 'Fair', 'Strong', 'Very Strong']
   - Styled with matching color, text-xs, mt-1
5. If password is empty, return null (don't render anything)

This is purely informational -- it does NOT block form submission per research recommendation.
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - File exports PasswordStrengthMeter component
    - Component imports zxcvbn
  </verify>
  <done>
    - PasswordStrengthMeter renders colored bar and label based on zxcvbn score (0-4)
    - Component is informational only, does not block submission
    - Returns null when password is empty
    - Colors match design system (red -> amber -> yellow -> green)
  </done>
</task>

<task type="auto">
  <name>Task 2: Rebuild AuthForms with glassmorphism design, validation, and error feedback</name>
  <files>client/src/components/AuthForms.tsx</files>
  <action>
Completely rewrite `client/src/components/AuthForms.tsx` with the following structure:

**Imports:**
- react-hook-form: useForm, Controller
- @hookform/resolvers/zod: zodResolver
- GradientBackground from './GradientBackground'
- Card from './ui/Card'
- Button from './ui/Button'
- Input from './ui/Input'
- useToast from './ui/Toast'
- PasswordStrengthMeter from './PasswordStrengthMeter'
- loginSchema, registerSchema, LoginFormData, RegisterFormData from '../schemas/auth'
- login, register from '../services/auth'
- useGameStore from '../store/useGameStore'

**Component Structure:**

1. **GradientBackground** renders behind everything

2. **Centered layout** with flex items-center justify-center min-h-screen

3. **Glassmorphism Card** (variant="glass", max-w-md, w-full, p-8):

   a. **Talk Space Branding:**
      - SVG icon: Create a simple inline SVG representing a stylized speech/proximity icon (two overlapping circles or a location pin with sound waves). Apply a glow effect using filter: drop-shadow with primary-500 color.
      - "Talk Space" heading: font-heading (Space Grotesk), text-2xl, font-bold, text-white, text-center
      - Subtitle: "Connect with people nearby", text-sm, text-gray-400, text-center

   b. **Tab Switcher:**
      - Container: flex bg-surface-800 rounded-lg p-1 mb-6
      - Two tabs: "Login" and "Register"
      - Active tab: bg-primary-500 text-white rounded-md shadow-sm
      - Inactive tab: text-gray-400 hover:text-white
      - Use state `tab: 'login' | 'register'` to switch
      - Add transition-all duration-200 for smooth sliding feel
      - When switching tabs, reset the other form (call reset() on react-hook-form)

   c. **Login Form (shown when tab === 'login'):**
      - Use useForm<LoginFormData> with zodResolver(loginSchema), mode: 'onBlur'
      - Controller wrapping Input for email (type="email", label="Email", icon: mail SVG)
      - Controller wrapping Input for password (type="password", label="Password", icon: lock SVG)
      - Pass fieldState.error?.message to Input's error prop
      - Gradient submit Button: Use Button component with custom className for gradient bg:
        `bg-gradient-to-r from-primary-500 to-accent-500 hover:from-primary-600 hover:to-accent-600 hover:scale-[1.02] hover:shadow-glow-md shadow-primary-500/25`
        Override variant appearance with these classes. Full width. Text: "Sign In"
        Set loading={isSubmitting}

   d. **Register Form (shown when tab === 'register'):**
      - Use useForm<RegisterFormData> with zodResolver(registerSchema), mode: 'onBlur'
      - Controller wrapping Input for email (type="email", label="Email", icon: mail SVG)
      - Controller wrapping Input for username (type="text", label="Username", icon: user SVG)
      - Controller wrapping Input for password (type="password", label="Password", icon: lock SVG)
      - PasswordStrengthMeter below password field, passing watched password value
      - Controller wrapping Input for confirmPassword (type="password", label="Confirm Password", icon: lock SVG)
      - Same gradient submit Button, text: "Create Account"

   e. **Form Error Shake:**
      - Track `shaking` boolean state
      - On form submit error (API returns error), set shaking=true
      - Apply `animate-shake` class to the Card when shaking is true
      - Listen for animationend event on the Card to set shaking=false (so animation can re-trigger)
      - Show error toast via useToast().error() with the error message

   f. **Social Auth Placeholder:**
      - Below the form, add a divider: "or continue with" text between two horizontal lines (flex items-center, divider pattern)
      - Two buttons side by side: "Google" and "GitHub"
      - Each button: Button variant="secondary", full opacity-50, cursor-not-allowed, disabled
      - Include simple SVG icons for Google (G) and GitHub (octocat outline)
      - Below buttons: text-xs text-gray-500 "Coming soon"

**onSubmit Handler:**
- For login: call login({ email, password }), on success setAuthUser(result.user)
- For register: call register({ email, username, password }), on success setAuthUser(result.user)
- On error: trigger shake animation, show error toast
- Use try/catch, set loading via isSubmitting from react-hook-form

**Key details:**
- Use react-hook-form's Controller component to wrap the existing Input component from Phase 1
- Spread field props (onChange, onBlur, value, ref) from Controller's render prop into Input
- Pass validation state: error={fieldState.error?.message} to show red border + error message
- The existing Input component already handles error styling (red border, error message display)
- Watch password field value for real-time PasswordStrengthMeter updates: `const password = watch('password')`
- Icons should be simple inline SVGs (16x16 or 20x20), not an icon library
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - AuthForms.tsx imports and uses react-hook-form with zodResolver
    - AuthForms.tsx imports and renders GradientBackground
    - AuthForms.tsx uses Card variant="glass" for the auth container
    - AuthForms.tsx uses Controller wrapping Input for all form fields
    - AuthForms.tsx renders PasswordStrengthMeter on register form
    - AuthForms.tsx has shake animation logic with animationend listener
    - AuthForms.tsx uses useToast for error feedback
    - AuthForms.tsx has disabled social auth placeholder buttons
    - AuthForms.tsx calls login/register from auth service on submit
  </verify>
  <done>
    - AUTH-01: Gradient mesh background visible behind auth card (via GradientBackground)
    - AUTH-02: Glassmorphism card with Talk Space SVG branding and sliding tab switcher
    - AUTH-03: Floating label inputs with validation icons on blur, password strength meter on register
    - AUTH-04: Gradient submit button (indigo->blue) with hover scale + glow and loading spinner
    - AUTH-05: Error feedback via form shake animation, red glow on invalid fields (Input error prop), descriptive toast
    - AUTH-06: Social auth placeholder section with disabled Google/GitHub buttons and "Coming soon" label
  </done>
</task>

</tasks>

<verification>
1. Run `npx tsc --noEmit` -- no TypeScript errors
2. AuthForms renders glassmorphism card over gradient mesh background
3. Tab switcher toggles between login and register forms with smooth transition
4. Form inputs validate on blur with red border and error messages
5. Password strength meter shows on register form with colored bar
6. Submit button has indigo-to-blue gradient with hover glow effect
7. Form shakes on API error with toast notification
8. Social auth buttons are visible but disabled with "Coming soon" label
9. Successful login/register calls setAuthUser and navigates to lobby
</verification>

<success_criteria>
- AuthForms.tsx fully redesigned with glassmorphism over gradient background
- react-hook-form + Zod validation working on blur for all fields
- PasswordStrengthMeter renders zxcvbn-based strength indicator
- Form shake + toast on errors
- Social auth placeholders visible
- TypeScript compiles without errors
- All 6 requirements (AUTH-01 through AUTH-06) addressed
</success_criteria>

<output>
After completion, create `.planning/phases/02-authentication-lobby-redesign/02-02-SUMMARY.md`
</output>
